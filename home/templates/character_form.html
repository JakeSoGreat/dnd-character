{% extends "base.html" %} 
{% block content %}

<div class="character-form-container">
    <h2>
        {{ character_form.instance.pk|yesno:'Edit Character,Create Character' }}
    </h2>

    <ul class="nav nav-tabs" id="characterTabs" role="tablist">
        <li class="nav-item" role="presentation">
            <button
                class="nav-link active"
                id="character-tab"
                data-bs-toggle="tab"
                data-bs-target="#character"
                type="button"
            >
                Character Info
            </button>
        </li>
        {% if character_form.instance.pk %}
        <li class="nav-item" role="presentation">
            <button
                class="nav-link"
                id="quick-add-tab"
                data-bs-toggle="tab"
                data-bs-target="#quick-add"
                type="button"
            >
                Add New Spells & Items
            </button>
        </li>
        {% endif %}
    </ul>

    <div class="tab-content" id="characterTabsContent">
        <!-- Main Character Form Tab -->
        <div
            class="tab-pane fade show active character-form"
            id="character"
            role="tabpanel"
        >
            <form method="post">
                {% csrf_token %} {{ character_form.as_p }}
                <div class="form-buttons">
                    <button type="submit" class="form-btn form-btn-primary">
                        Save Character
                    </button>
                    <a
                        href="{% url 'character_list' %}"
                        class="form-btn form-btn-secondary"
                    >
                        Back to list
                    </a>
                </div>
            </form>
        </div>

        <!-- Quick Add Tab -->
        {% if character_form.instance.pk %}
        <div class="tab-pane fade" id="quick-add" role="tabpanel">
            <div class="quick-add-section">
                <div class="quick-add-form">
                    <h5>Add New Spell</h5>
                    <form method="post" class="character-form">
                        {% csrf_token %} {{ spell_form.as_p }}
                        <div class="form-buttons">
                            <button
                                type="submit"
                                name="add_spell"
                                class="form-btn form-btn-success"
                            >
                                Add Spell
                            </button>
                        </div>
                    </form>
                </div>

                <div class="quick-add-form">
                    <h5>Add New Item</h5>
                    <form method="post" class="character-form">
                        {% csrf_token %} {{ item_form.as_p }}
                        <div class="form-buttons">
                            <button
                                type="submit"
                                name="add_item"
                                class="form-btn form-btn-success"
                            >
                                Add Item
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        {% endif %}
    </div>
</div>

{% endblock %}
